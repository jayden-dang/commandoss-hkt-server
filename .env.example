# =============================================================================
# ZK-Persona Server Environment Configuration
# =============================================================================
# Copy this file to .env and update the values according to your environment
# 
# This file contains all environment variables needed for the ZK-Persona server
# including database, web server, Redis, SUI blockchain, and authentication.
# =============================================================================

# =============================================================================
# üåê WEB SERVER CONFIGURATION
# =============================================================================
# Web server binding address and port
WEB_ADDR=0.0.0.0:8080

# =============================================================================
# üóÑÔ∏è DATABASE CONFIGURATION (PostgreSQL)
# =============================================================================
# Primary database connection string
POSTGRES_DSN=postgresql://zkpersona_user:zkpersona_password@localhost:5432/zkpersona_db

# Alternative environment variable names (for compatibility)
# DATABASE_URL=postgresql://zkpersona_user:zkpersona_password@localhost:5432/zkpersona_db
# POSTGRES_URL=postgresql://zkpersona_user:zkpersona_password@localhost:5432/zkpersona_db

# Connection Pool Settings
POSTGRES_MAX_CONNS=50
POSTGRES_MIN_CONNS=5
POSTGRES_CONNECT_TIMEOUT_SECS=30
POSTGRES_IDLE_TIMEOUT_SECS=600
POSTGRES_MAX_LIFETIME_SECS=3600

# SSL Configuration
POSTGRES_SSL_MODE=prefer

# Migration and Transaction Settings
POSTGRES_AUTO_MIGRATE=true
POSTGRES_ENABLE_TRANSACTIONS=true
POSTGRES_TEST_CONNECTION=true

# Retry Configuration
POSTGRES_RETRY_ATTEMPTS=3
POSTGRES_RETRY_DELAY_MS=1000

# =============================================================================
# üî¥ REDIS CONFIGURATION
# =============================================================================
# Redis server address for caching and session management
REDIS_ADDR=redis://localhost:6379

# Alternative Redis configurations (uncomment if needed)
# REDIS_ADDR=redis://username:password@localhost:6379
# REDIS_ADDR=redis://localhost:6379/0

# =============================================================================
# ‚õΩ SUI BLOCKCHAIN CONFIGURATION
# =============================================================================
# SUI network environment
SUI_ENV=devnet

# Gas Station Configuration (for sponsored transactions)
SUI_SPONSOR_ADDRESS=0x1234567890abcdef1234567890abcdef12345678
SUI_SPONSOR_PRIVATE_KEY=0xabcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890

# Gas budget limits
SUI_MAX_GAS_BUDGET=10000000

# Alternative SUI configurations
# SUI_ENV=testnet
# SUI_ENV=mainnet
# SUI_ENV=localnet

# =============================================================================
# üîê AUTHENTICATION CONFIGURATION
# =============================================================================
# JWT secret for authentication (CHANGE THIS IN PRODUCTION!)
AUTH_JWT_SECRET=your-super-secret-jwt-key-change-this-in-production-12345

# =============================================================================
# üìä ZK-PERSONA SPECIFIC CONFIGURATION
# =============================================================================
# ZK Proof Configuration
ZK_PROOF_TIMEOUT_SECS=30
ZK_PROOF_MAX_RETRIES=3

# Behavior Analysis Configuration
BEHAVIOR_ANALYSIS_BATCH_SIZE=100
BEHAVIOR_ANALYSIS_TIMEOUT_SECS=60

# Scoring Configuration
SCORING_MODEL_VERSION=v1.0
SCORING_CONFIDENCE_THRESHOLD=0.8

# Reputation Configuration
REPUTATION_UPDATE_INTERVAL_SECS=3600
REPUTATION_MIN_SCORE=0.0
REPUTATION_MAX_SCORE=100.0

# =============================================================================
# üîß DEVELOPMENT & DEBUGGING
# =============================================================================
# Rust log level (for development)
RUST_LOG=info,zkpersona=debug,jd_storage=debug

# Development mode settings
DEV_MODE=true
DEBUG_QUERIES=false

# Performance monitoring
ENABLE_METRICS=true
METRICS_PORT=9090

# =============================================================================
# üöÄ PRODUCTION SETTINGS
# =============================================================================
# These settings should be used in production environments

# Production database (example)
# POSTGRES_DSN=postgresql://prod_user:secure_password@prod-db.example.com:5432/zkpersona_prod
# POSTGRES_MAX_CONNS=100
# POSTGRES_MIN_CONNS=10
# POSTGRES_SSL_MODE=require

# Production Redis (example)
# REDIS_ADDR=redis://prod-cache.example.com:6379

# Production SUI (example)
# SUI_ENV=mainnet
# SUI_SPONSOR_ADDRESS=0x_your_production_sponsor_address
# SUI_SPONSOR_PRIVATE_KEY=0x_your_production_private_key

# Production security
# AUTH_JWT_SECRET=your-very-secure-production-jwt-secret
# RUST_LOG=warn,zkpersona=info

# =============================================================================
# üß™ TESTING CONFIGURATION
# =============================================================================
# Test database (separate from development)
# TEST_POSTGRES_DSN=postgresql://test_user:test_password@localhost:5432/zkpersona_test
# TEST_REDIS_ADDR=redis://localhost:6380

# Test settings
# POSTGRES_AUTO_MIGRATE=true
# POSTGRES_TEST_CONNECTION=true
# DEV_MODE=true

# =============================================================================
# üìù CONFIGURATION NOTES
# =============================================================================
#
# 1. Database Connection:
#    - Ensure PostgreSQL is running and accessible
#    - Create the database before starting the server
#    - The user must have CREATE, DROP, INSERT, UPDATE, DELETE permissions
#
# 2. Redis Connection:
#    - Redis is used for caching and session management
#    - Ensure Redis server is running and accessible
#
# 3. SUI Blockchain:
#    - Configure sponsor address and private key for gas station functionality
#    - Ensure sufficient SUI balance in sponsor wallet for gas fees
#
# 4. Security:
#    - Change all default passwords and secrets in production
#    - Use strong, unique passwords for database and Redis
#    - Store private keys securely (consider using key management services)
#
# 5. Environment-specific configs:
#    - Use different values for development, staging, and production
#    - Consider using environment-specific .env files (.env.dev, .env.prod)
#
# 6. Docker Setup:
#    - If using Docker, adjust hostnames to service names
#    - Example: POSTGRES_DSN=postgresql://user:pass@postgres:5432/db
#
# =============================================================================
# üê≥ DOCKER COMPOSE EXAMPLE
# =============================================================================
# When using with docker-compose, use these hostnames:
# POSTGRES_DSN=postgresql://zkpersona_user:zkpersona_password@postgres:5432/zkpersona_db
# REDIS_ADDR=redis://redis:6379
#
# =============================================================================